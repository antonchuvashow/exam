{% extends "base.html" %}
{% block content %}
<div class="max-w-3xl mx-auto mt-12 bg-white shadow-lg rounded-2xl p-8 border border-gray-100">
    <h1 class="text-2xl font-bold mb-6 text-gray-800">{{ test.title }}</h1>

    <div class="text-center mb-6">
        <p class="text-gray-600 text-lg mb-2">Ваш результат:</p>
        <p class="text-4xl font-bold text-blue-600">{{ session.score_percent }}%</p>
        <p class="text-gray-600 mt-2">
            {{ session.earned_points }} из {{ session.total_points }} баллов
        </p>
    </div>

    {% if session.time_outside_seconds > 0 %}
    <div class="bg-red-50 border border-red-200 text-red-600 rounded-xl p-4 mb-6">
        Времени вне страницы: <b>{{ session.time_outside_seconds }}</b> секунд.
        Нарушения: <b>{{ session.tab_switches }}</b> из допустимых <b>{{ test.max_warnings }}</b>.
        {% if session.submitted_due_to_violation %}
            Тест завершён автоматически из-за превышения лимита нарушений.
        {% endif %}
    </div>
    {% endif %}

    {% if session.finished_at %}
    <p class="text-gray-500 text-sm text-center mb-4">
        Завершено: {{ session.finished_at|date:"d.m.Y H:i" }}
    </p>
    {% endif %}

    <div class="mt-8 text-center">
        <a href="/"
            class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-xl transition">
            Вернуться на главную
        </a>
    </div>
</div>
{% endblock %}